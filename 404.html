<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>404 Not Found</title>
    <!-- plausible -->
    <script defer data-domain="goodbye-glaciers.info" src="https://plausible.io/js/script.file-downloads.outbound-links.js"></script>
    
    <script>
      function getRealPath() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get('path') || window.location.pathname;
      }

      const path = getRealPath();
      const redirectUrl = 'https://qr.at' + path;

      const sixCharOnly = /^\/[a-zA-Z0-9]{6}$/.test(path);
      const codeImage = /^\/code\/[a-zA-Z0-9]{6}\.(png|svg)$/.test(path);

      document.addEventListener("DOMContentLoaded", () => {
        const statusBox = document.getElementById("status");

        if (sixCharOnly || codeImage) {
          console.log("✅ Redirecting to:", redirectUrl);
          window.location.href = redirectUrl;
        } else {
          console.log("❌ Invalid path:", path);
          showNotFound();
        }
      });

      function showNotFound() {
        const statusBox = document.getElementById("status");
        statusBox.innerHTML = `
          <h1>404 - Not Found</h1>
          <p>The page you’re looking for doesn’t exist.</p>
        `;
        document.title = "404 Not Found";
      }
    </script>
  </head>
  <body>
    <div id="status">
      <p>Loading...</p>
    </div>
  </body>
</html>
